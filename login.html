<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Iniciar sesión • CIM</title>
  <link rel="icon" href="logo.jpeg" type="image/x-icon">
  <link rel="stylesheet" href="styles.css" /> <!-- tu CSS global -->
  <link rel="stylesheet" href="login.css" />  <!-- CSS de login -->
</head>
<body class="login-body">

<!-- LOADER -->
<div id="app-loader" aria-live="polite" aria-label="Cargando sitio">
  <div class="loader-box">
    <span class="loader-logo">CLÚSTER DE MORÓN</span>
    <div class="loader-dots" aria-hidden="true"><span></span><span></span><span></span></div>
    <div class="loader-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
      <div class="loader-progress__bar"></div>
    </div>
    <p class="loader-text"><span id="loader-perc">0</span>% • Cargando…</p>
  </div>
</div>

<!-- HEADER -->
<header class="site-header">
  <div class="container">
    <a class="brand" href="index.html#presentacion">
      <img src="logo1.png" alt="Clúster Industrial de Morón" class="brand-mark" />
      <span class="brand-text">CIM</span>
    </a>

    <button class="nav-toggle" aria-expanded="false" aria-controls="main-nav" aria-label="Abrir menú">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <nav id="main-nav" class="nav">
      <a href="index.html#presentacion" class="nav-link">Presentación</a>
      <a href="login.html" class="btn-cta">Vinculate</a>
    </nav>
  </div>
</header>

<!-- VIDEO DE FONDO -->
<div class="video-background" aria-hidden="true">
  <video autoplay muted loop playsinline poster="poster.jpg">
    <source src="video-de-prueba.mp4" type="video/mp4">
  </video>
  <div class="video-overlay"></div>
</div>

<!-- CONTENIDO -->
<main class="auth-wrapper" role="main">
  <section class="auth-card" aria-labelledby="login-title">
    <div class="auth-head">
      <img src="logo1.png" alt="" class="auth-logo">
      <h1 id="login-title">Iniciar sesión</h1>
      <p class="auth-subtitle">Accedé a tu cuenta para continuar</p>
    </div>

    <form id="loginForm" novalidate>
      <div class="form-group">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" placeholder="tu@correo.com" required autocomplete="email">
        <small class="error-msg">Ingresá un email válido.</small>
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <div class="password-field">
          <input id="password" name="password" type="password" placeholder="Tu contraseña" required minlength="6" autocomplete="current-password">
          <button type="button" class="btn-eye" aria-label="Mostrar u ocultar contraseña" aria-controls="password">👁️</button>
        </div>
        <small class="error-msg">La contraseña debe tener al menos 6 caracteres.</small>
      </div>

      <div class="auth-row">
        <label class="chk">
          <input type="checkbox" name="remember" id="remember">
          <span>Recordarme</span>
        </label>
        <a class="auth-link" href="#" id="forgotLink">¿Olvidaste tu contraseña?</a>
      </div>

      <button class="btn-enviar" type="submit" id="loginBtn">Ingresar</button>
      <p class="auth-note">¿No tenés cuenta? <a class="auth-link" href="#">Solicitá acceso</a></p>
    </form>
  </section>
</main>

<!-- Scripts -->
<script>
/* Loader seguro */
(function(){
  const loader = document.getElementById('app-loader');
  const bar = document.querySelector('.loader-progress__bar');
  const percLabel = document.getElementById('loader-perc');
  if(!loader) return;

  let target = 0, shown = 0;
  const estTimer = setInterval(() => { target = Math.min(95, target + 5); }, 90);
  window.addEventListener('load', () => { target = 100; });

  (function tick(){
    shown += (target - shown) * 0.14;
    const pct = Math.round(shown);
    if(bar) bar.style.width = pct + '%';
    if(percLabel) percLabel.textContent = pct;
    requestAnimationFrame(tick);
  })();

  setTimeout(() => {
    clearInterval(estTimer);
    target = 100;
    loader.classList.add('hidden');
    document.body.classList.add('is-ready');
    setTimeout(() => loader.remove?.(), 550);
  }, 1000);
})();
</script>

<script>
/* Mostrar / ocultar contraseña */
document.querySelector('.btn-eye')?.addEventListener('click', function(){
  const input = document.getElementById(this.getAttribute('aria-controls'));
  if(!input) return;
  const isPwd = input.type === 'password';
  input.type = isPwd ? 'text' : 'password';
  this.setAttribute('aria-label', isPwd ? 'Ocultar contraseña' : 'Mostrar contraseña');
});

/* Validación y demo */
const form = document.getElementById('loginForm');
const btn  = document.getElementById('loginBtn');
form?.addEventListener('submit', function(e){
  e.preventDefault();
  form.querySelectorAll('.form-group').forEach(g => g.classList.remove('is-invalid'));

  let ok = true;
  if(!form.email.checkValidity()){ form.email.closest('.form-group').classList.add('is-invalid'); ok = false; }
  if(!form.password.checkValidity()){ form.password.closest('.form-group').classList.add('is-invalid'); ok = false; }
  if(!ok) return;

  btn.disabled = true; btn.classList.add('is-loading'); btn.textContent = 'Ingresando…';
  setTimeout(() => { window.location.href = 'index.html'; }, 1200);
});
</script>
</body>
</html>
